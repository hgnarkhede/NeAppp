import{c as C,r as x,j as e,h as S}from"./index-C0QhP1fA.js";import{B as p}from"./button-DQE4ffiY.js";import{S as k}from"./search-8a8qRS-k.js";import{A as L}from"./alert-circle-yywmEXG5.js";import"./utils-BNf5BS2b.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=C("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),F={realEstate:["realtor","real estate","property","broker","agent","realty"],construction:["builder","contractor","construction","renovation"],trades:["plumber","electrician","hvac","mechanical"],inspection:["inspector","assessment","audit","certification"]};function M(r,i){if(r.length===0)return i.length;if(i.length===0)return r.length;const a=Array(i.length+1).fill(null).map(()=>Array(r.length+1).fill(null));for(let n=0;n<=r.length;n++)a[0][n]=n;for(let n=0;n<=i.length;n++)a[n][0]=n;for(let n=1;n<=i.length;n++)for(let s=1;s<=r.length;s++){const c=r[s-1]===i[n-1]?0:1;a[n][s]=Math.min(a[n][s-1]+1,a[n-1][s]+1,a[n-1][s-1]+c)}return a[i.length][r.length]}function y(r,i){const a=Math.max(r.length,i.length);return a===0?1:1-M(r.toLowerCase(),i.toLowerCase())/a}function I(r,i){const a=r.toLowerCase().split(/\s+/),n=i.toLowerCase().split(/\s+/);let s=0,c=0;for(const d of Object.values(F))for(const m of d){const o=a.includes(m)&&n.includes(m)?1:0;s+=o,c++}return c>0?s/c:0}class h{constructor(){this.data=[],this.data=[{id:"1",name:"Keller Williams Realty",licenseNumber:"RE-2024-001",type:"Real Estate Agency",status:"active",lastVerified:"2024-03-15",confidence:0,matches:[]},{id:"2",name:"Elite Construction Co.",licenseNumber:"GC-2024-102",type:"General Contractor",status:"active",lastVerified:"2024-03-14",confidence:0,matches:[]}]}static getInstance(){return h.instance||(h.instance=new h),h.instance}async search(i,a={}){const n=i.toLowerCase().trim();return this.data.map(s=>{const c=[];let d=0;const m=y(n,s.name);m>.6&&(c.push({field:"name",value:s.name,score:m}),d+=m);const o=y(n,s.licenseNumber);o>.7&&(c.push({field:"license",value:s.licenseNumber,score:o}),d+=o);const u=I(n,`${s.name} ${s.type}`);u>0&&(c.push({field:"category",value:s.type,score:u}),d+=u);const f=c.length>0?d/c.length:0;return{...s,confidence:f,matches:c}}).filter(s=>a.status&&s.status!==a.status||a.type&&!s.type.toLowerCase().includes(a.type.toLowerCase())||a.minConfidence&&s.confidence<a.minConfidence?!1:s.confidence>0).sort((s,c)=>c.confidence-s.confidence)}addData(i){this.data.push({...i,confidence:0,matches:[]})}}const R=h.getInstance();function D(){const[r,i]=x.useState(""),[a,n]=x.useState(!1),[s,c]=x.useState([]),[d,m]=x.useState(null),[o,u]=x.useState({status:"active",minConfidence:.6}),[f,g]=x.useState(!1),j=async t=>{if(t.preventDefault(),!!r.trim()){n(!0),m(null);try{const l=await R.search(r,o);c(l)}catch{m("Failed to perform search. Please try again.")}finally{n(!1)}}},v=t=>{switch(t){case"active":return"text-green-600 bg-green-50";case"inactive":return"text-yellow-600 bg-yellow-50";case"expired":return"text-red-600 bg-red-50"}},N=t=>t>=.9?"High":t>=.7?"Medium":"Low",b=t=>t>=.9?"text-green-600":t>=.7?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI-Powered License Search"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Search across multiple databases using natural language"}),e.jsxs("form",{onSubmit:j,className:"mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:t=>i(t.target.value),placeholder:"Search by name, license number, or description...",className:"block w-full rounded-lg border border-gray-300 pl-10 pr-4 py-2 text-sm placeholder:text-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:()=>g(!f),children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.status==="active",onChange:t=>u(l=>({...l,status:t.target.checked?"active":void 0})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Active licenses only"})]})]}),e.jsx(p,{type:"submit",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"h-4 w-4 animate-spin mr-2"}),"Searching..."]}):"Search"})]}),f&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Confidence Score"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:o.minConfidence||0,onChange:t=>u(l=>({...l,minConfidence:parseFloat(t.target.value)})),className:"mt-2 w-full"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[Math.round((o.minConfidence||0)*100),"% minimum match required"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"License Type"}),e.jsxs("select",{value:o.type||"",onChange:t=>u(l=>({...l,type:t.target.value||void 0})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"real estate",children:"Real Estate"}),e.jsx("option",{value:"construction",children:"Construction"}),e.jsx("option",{value:"trades",children:"Technical Trades"}),e.jsx("option",{value:"inspection",children:"Inspection Services"})]})]})]})]})]}),d&&e.jsx("div",{className:"p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(L,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:d})]})}),e.jsxs("div",{className:"divide-y",children:[s.map(t=>e.jsxs("div",{className:"p-6 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-gray-500",children:[e.jsx("span",{children:t.type}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:t.licenseNumber})]})]}),e.jsx("div",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${v(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Match Confidence"}),e.jsxs("p",{className:`font-medium ${b(t.confidence)}`,children:[N(t.confidence)," (",(t.confidence*100).toFixed(1),"%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Last Verified"}),e.jsx("p",{className:"font-medium text-gray-900",children:t.lastVerified})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Matching Criteria:"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.matches.map((l,w)=>e.jsxs("div",{className:"inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-1 text-xs text-blue-600",children:[e.jsxs("span",{children:[l.field,":"]}),e.jsx("span",{className:"font-medium",children:l.value}),e.jsxs("span",{className:"opacity-75",children:["(",(l.score*100).toFixed(0),"%)"]})]},w))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-3",children:[e.jsx(p,{variant:"outline",size:"sm",children:"View Details"}),e.jsx(p,{size:"sm",children:"Verify Now"})]})]},t.id)),r&&s.length===0&&!a&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:['No results found for "',r,'". Try adjusting your search terms or filters.']})]})]})}export{D as AISearch};
